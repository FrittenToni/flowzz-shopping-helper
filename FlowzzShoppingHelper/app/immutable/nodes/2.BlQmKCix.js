import{A as ue,s as ie,e as y,d as w,f as P,i as C,v as I,k as L,n as W,O as He,r as he,t as Z,b as U,h as $,j as z,l as m,m as x,P as fe,Q as Y,p as re,R as G,S as ae,T as ne,F as Be,U as ve,V as je}from"../chunks/scheduler.CRujbgPS.js";import{t as K,S as oe,i as ce,g as Ue,a as te,c as ze,b as de,d as _e,m as pe,e as me}from"../chunks/index.Lmib2e5y.js";function X(r){return(r==null?void 0:r.length)!==void 0?r:Array.from(r)}function Re(r,e){r.d(1),e.delete(r.key)}function qe(r,e,n,t,a,l,s,i,f,v,o,T){let h=r.length,c=l.length,S=h;const d={};for(;S--;)d[r[S].key]=S;const u=[],p=new Map,b=new Map,_=[];for(S=c;S--;){const M=T(a,l,S),J=n(M);let g=s.get(J);g?_.push(()=>g.p(M,e)):(g=v(J,M),g.c()),p.set(J,u[S]=g),J in d&&b.set(J,Math.abs(S-d[J]))}const O=new Set,k=new Set;function H(M){K(M,1),M.m(i,o),s.set(M.key,M),o=M.first,c--}for(;h&&c;){const M=u[c-1],J=r[h-1],g=M.key,V=J.key;M===J?(o=M.first,h--,c--):p.has(V)?!s.has(g)||O.has(g)?H(M):k.has(V)?h--:b.get(g)>b.get(V)?(k.add(g),H(M)):(O.add(V),h--):(f(J,s),h--)}for(;h--;){const M=r[h];p.has(M.key)||f(M,s)}for(;c;)H(u[c-1]);return ue(_),u}async function Ge(r){let e=[],n=1;const t=12;let a=!0;for(r("Syncing Cannabis Strains...");a;)try{const s=await(await fetch(`https://flowzz.com/api/products?pagination[page]=${n}&pagination[pageSize]=${t}`)).json();if(s.error)throw new Error("API error");if(s.message&&s.message.data&&s.message.data.length>0){e=[...e,...s.message.data],n++;const i=s.message.meta.pagination;a=i.page<i.pageCount}else a=!1}catch(l){console.error("Error fetching cannabis strains:",l),r("Failed to retrieve cannabis strains.");return}localStorage.setItem("cannabisStrains",JSON.stringify(e)),r(`${e.length} Cannabis Strains available`)}async function Xe(r,e){try{const n=await fetch("https://flowzz.com/api/vendor",{method:"POST",headers:{"Content-Type":"application/json","X-Xsrf-Token":r},body:JSON.stringify({t:2,id:e})});if(!n.ok)throw new Error(`HTTP error! status: ${n.status}`);return await n.json()}catch(n){return console.error("Error:",n),null}}async function Ye(r){try{const n=await(await fetch("https://flowzz.com/api/auth/csrf")).json();if(n.csrfToken)return await Xe(n.csrfToken,r);throw new Error("Failed to fetch CSRF token")}catch(e){return console.error("Error fetching CSRF token:",e),null}}function Qe(r){let e,n,t,a,l=r[2]>0&&be(r);return{c(){e=y("div"),n=y("div"),t=Z(r[1]),a=U(),l&&l.c()},l(s){e=w(s,"DIV",{});var i=P(e);n=w(i,"DIV",{});var f=P(n);t=$(f,r[1]),f.forEach(C),a=z(i),l&&l.l(i),i.forEach(C)},m(s,i){L(s,e,i),m(e,n),m(n,t),m(e,a),l&&l.m(e,null)},p(s,i){i&2&&x(t,s[1]),s[2]>0?l?l.p(s,i):(l=be(s),l.c(),l.m(e,null)):l&&(l.d(1),l=null)},d(s){s&&C(e),l&&l.d()}}}function Ke(r){let e,n;return{c(){e=y("p"),n=Z(r[1])},l(t){e=w(t,"P",{});var a=P(e);n=$(a,r[1]),a.forEach(C)},m(t,a){L(t,e,a),m(e,n)},p(t,a){a&2&&x(n,t[1])},d(t){t&&C(e)}}}function be(r){let e,n,t,a;return{c(){e=y("img"),this.h()},l(l){e=w(l,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){fe(e.src,n="/refresh.png")||I(e,"src",n),I(e,"alt","Refresh Strains"),I(e,"class","refresh-icon svelte-1ufbkjf")},m(l,s){L(l,e,s),t||(a=Y(e,"click",r[3]),t=!0)},p:W,d(l){l&&C(e),t=!1,a()}}}function We(r){let e;function n(l,s){return l[0]?Ke:Qe}let t=n(r),a=t(r);return{c(){e=y("main"),a.c(),this.h()},l(l){e=w(l,"MAIN",{class:!0});var s=P(e);a.l(s),s.forEach(C),this.h()},h(){I(e,"class","svelte-1ufbkjf")},m(l,s){L(l,e,s),a.m(e,null)},p(l,[s]){t===(t=n(l))&&a?a.p(l,s):(a.d(1),a=t(l),a&&(a.c(),a.m(e,null)))},i:W,o:W,d(l){l&&C(e),a.d()}}}function Ze(r,e,n){let t=!1,a="",l=0,s=[];const i=He();function f(h){n(1,a=h)}async function v(){const h=localStorage.getItem("cannabisStrains");if(h){const c=JSON.parse(h);s=c.map(S=>({id:S.id,name:S.name})),n(2,l=c.length),f(`${l} Cannabis Strains available`),i("strainsUpdated",{cannabisStrains:s,strainCount:l})}else await o()}async function o(){n(0,t=!0),await Ge(f);const h=localStorage.getItem("cannabisStrains");if(h){const c=JSON.parse(h);s=c.map(S=>({id:S.id,name:S.name})),n(2,l=c.length),i("strainsUpdated",{cannabisStrains:s,strainCount:l})}n(0,t=!1)}async function T(){i("resetView"),await o()}return he(()=>{v()}),[t,a,l,T]}class $e extends oe{constructor(e){super(),ce(this,e,Ze,We,ie,{})}}function Se(r,e,n){const t=r.slice();return t[2]=e[n],t}function ke(r,e,n){const t=r.slice();return t[5]=e[n],t}function Ce(r,e,n){const t=r.slice();return t[5]=e[n],t}function xe(r){let e,n="No vendor available providing all selected strains :(";return{c(){e=y("p"),e.textContent=n},l(t){e=w(t,"P",{"data-svelte-h":!0}),G(e)!=="svelte-xu2sx2"&&(e.textContent=n)},m(t,a){L(t,e,a)},p:W,d(t){t&&C(e)}}}function et(r){let e,n="Vendors offering all strains:",t,a,l,s,i,f="Vendor",v,o,T,h="Total",c,S,d=X(r[0]),u=[];for(let _=0;_<d.length;_+=1)u[_]=ye(Ce(r,d,_));let p=X(r[1]),b=[];for(let _=0;_<p.length;_+=1)b[_]=Ee(Se(r,p,_));return{c(){e=y("h2"),e.textContent=n,t=U(),a=y("table"),l=y("thead"),s=y("tr"),i=y("th"),i.textContent=f,v=U();for(let _=0;_<u.length;_+=1)u[_].c();o=U(),T=y("th"),T.textContent=h,c=U(),S=y("tbody");for(let _=0;_<b.length;_+=1)b[_].c();this.h()},l(_){e=w(_,"H2",{"data-svelte-h":!0}),G(e)!=="svelte-7ewspa"&&(e.textContent=n),t=z(_),a=w(_,"TABLE",{class:!0});var O=P(a);l=w(O,"THEAD",{});var k=P(l);s=w(k,"TR",{});var H=P(s);i=w(H,"TH",{class:!0,"data-svelte-h":!0}),G(i)!=="svelte-1htfxt4"&&(i.textContent=f),v=z(H);for(let J=0;J<u.length;J+=1)u[J].l(H);o=z(H),T=w(H,"TH",{class:!0,"data-svelte-h":!0}),G(T)!=="svelte-3jponc"&&(T.textContent=h),H.forEach(C),k.forEach(C),c=z(O),S=w(O,"TBODY",{});var M=P(S);for(let J=0;J<b.length;J+=1)b[J].l(M);M.forEach(C),O.forEach(C),this.h()},h(){I(i,"class","svelte-1u0ay4h"),I(T,"class","svelte-1u0ay4h"),I(a,"class","svelte-1u0ay4h")},m(_,O){L(_,e,O),L(_,t,O),L(_,a,O),m(a,l),m(l,s),m(s,i),m(s,v);for(let k=0;k<u.length;k+=1)u[k]&&u[k].m(s,null);m(s,o),m(s,T),m(a,c),m(a,S);for(let k=0;k<b.length;k+=1)b[k]&&b[k].m(S,null)},p(_,O){if(O&1){d=X(_[0]);let k;for(k=0;k<d.length;k+=1){const H=Ce(_,d,k);u[k]?u[k].p(H,O):(u[k]=ye(H),u[k].c(),u[k].m(s,o))}for(;k<u.length;k+=1)u[k].d(1);u.length=d.length}if(O&3){p=X(_[1]);let k;for(k=0;k<p.length;k+=1){const H=Se(_,p,k);b[k]?b[k].p(H,O):(b[k]=Ee(H),b[k].c(),b[k].m(S,null))}for(;k<b.length;k+=1)b[k].d(1);b.length=p.length}},d(_){_&&(C(e),C(t),C(a)),ae(u,_),ae(b,_)}}}function ye(r){let e,n=r[5].name+"",t;return{c(){e=y("th"),t=Z(n),this.h()},l(a){e=w(a,"TH",{class:!0});var l=P(e);t=$(l,n),l.forEach(C),this.h()},h(){I(e,"class","svelte-1u0ay4h")},m(a,l){L(a,e,l),m(e,t)},p(a,l){l&1&&n!==(n=a[5].name+"")&&x(t,n)},d(a){a&&C(e)}}}function we(r){let e,n=r[2].prices[r[5].name]+"",t;return{c(){e=y("td"),t=Z(n),this.h()},l(a){e=w(a,"TD",{class:!0});var l=P(e);t=$(l,n),l.forEach(C),this.h()},h(){I(e,"class","svelte-1u0ay4h")},m(a,l){L(a,e,l),m(e,t)},p(a,l){l&3&&n!==(n=a[2].prices[a[5].name]+"")&&x(t,n)},d(a){a&&C(e)}}}function Ee(r){let e,n,t=r[2].name+"",a,l,s,i,f=r[2].total+"",v,o,T=X(r[0]),h=[];for(let c=0;c<T.length;c+=1)h[c]=we(ke(r,T,c));return{c(){e=y("tr"),n=y("td"),a=Z(t),l=U();for(let c=0;c<h.length;c+=1)h[c].c();s=U(),i=y("td"),v=Z(f),o=U(),this.h()},l(c){e=w(c,"TR",{});var S=P(e);n=w(S,"TD",{class:!0});var d=P(n);a=$(d,t),d.forEach(C),l=z(S);for(let p=0;p<h.length;p+=1)h[p].l(S);s=z(S),i=w(S,"TD",{class:!0});var u=P(i);v=$(u,f),u.forEach(C),o=z(S),S.forEach(C),this.h()},h(){I(n,"class","svelte-1u0ay4h"),I(i,"class","svelte-1u0ay4h")},m(c,S){L(c,e,S),m(e,n),m(n,a),m(e,l);for(let d=0;d<h.length;d+=1)h[d]&&h[d].m(e,null);m(e,s),m(e,i),m(i,v),m(e,o)},p(c,S){if(S&2&&t!==(t=c[2].name+"")&&x(a,t),S&3){T=X(c[0]);let d;for(d=0;d<T.length;d+=1){const u=ke(c,T,d);h[d]?h[d].p(u,S):(h[d]=we(u),h[d].c(),h[d].m(e,s))}for(;d<h.length;d+=1)h[d].d(1);h.length=T.length}S&2&&f!==(f=c[2].total+"")&&x(v,f)},d(c){c&&C(e),ae(h,c)}}}function tt(r){let e;function n(l,s){return l[1].length>0?et:xe}let t=n(r),a=t(r);return{c(){a.c(),e=re()},l(l){a.l(l),e=re()},m(l,s){a.m(l,s),L(l,e,s)},p(l,[s]){t===(t=n(l))&&a?a.p(l,s):(a.d(1),a=t(l),a&&(a.c(),a.m(e.parentNode,e)))},i:W,o:W,d(l){l&&C(e),a.d(l)}}}function nt(r,e,n){let{selectedStrains:t=[]}=e,a=[];return r.$$set=l=>{"selectedStrains"in l&&n(0,t=l.selectedStrains)},r.$$.update=()=>{if(r.$$.dirty&3){const l=new Map;if(t.length>0){for(const s of t[0].vendors)l.set(s.name,{name:s.name,prices:{[t[0].name]:s.price},total:s.price});for(let s=1;s<t.length;s++){const i=t[s];for(const f of i.vendors)l.has(f.name)&&(l.get(f.name).prices[i.name]=f.price,l.get(f.name).total+=f.price);for(const[f,v]of l)v.prices[i.name]||l.delete(f)}n(1,a=Array.from(l.values())),a.forEach(s=>{s.total=parseFloat(s.total.toFixed(2))}),a.sort((s,i)=>s.total-i.total)}}},[t,a]}class lt extends oe{constructor(e){super(),ce(this,e,nt,tt,ie,{selectedStrains:0})}}function Te(r,e,n){const t=r.slice();return t[22]=e[n],t[23]=e,t[24]=n,t}function Ve(r,e,n){const t=r.slice();return t[25]=e[n],t}function Ie(r,e,n){const t=r.slice();return t[28]=e[n],t}function Ne(r,e,n){const t=r.slice();return t[31]=e[n],t}function Oe(r){let e,n=r[31].name+"",t,a;return{c(){e=y("option"),t=Z(n),this.h()},l(l){e=w(l,"OPTION",{});var s=P(e);t=$(s,n),s.forEach(C),this.h()},h(){e.__value=a=r[31].name,ne(e,e.__value)},m(l,s){L(l,e,s),m(e,t)},p(l,s){s[0]&4&&n!==(n=l[31].name+"")&&x(t,n),s[0]&4&&a!==(a=l[31].name)&&(e.__value=a,ne(e,e.__value))},d(l){l&&C(e)}}}function Pe(r){let e,n=r[28].name+"",t,a;return{c(){e=y("option"),t=Z(n),this.h()},l(l){e=w(l,"OPTION",{});var s=P(e);t=$(s,n),s.forEach(C),this.h()},h(){e.__value=a=r[28].name,ne(e,e.__value)},m(l,s){L(l,e,s),m(e,t)},p(l,s){s[0]&1&&n!==(n=l[28].name+"")&&x(t,n),s[0]&1&&a!==(a=l[28].name)&&(e.__value=a,ne(e,e.__value))},d(l){l&&C(e)}}}function st(r){let e;function n(l,s){if(l[22].noVendors)return it;if(l[22].vendors.length>0)return rt}let t=n(r),a=t&&t(r);return{c(){a&&a.c(),e=re()},l(l){a&&a.l(l),e=re()},m(l,s){a&&a.m(l,s),L(l,e,s)},p(l,s){t===(t=n(l))&&a?a.p(l,s):(a&&a.d(1),a=t&&t(l),a&&(a.c(),a.m(e.parentNode,e)))},d(l){l&&C(e),a&&a.d(l)}}}function at(r){let e,n="Loading...";return{c(){e=y("p"),e.textContent=n},l(t){e=w(t,"P",{"data-svelte-h":!0}),G(e)!=="svelte-qdsr2u"&&(e.textContent=n)},m(t,a){L(t,e,a)},p:W,d(t){t&&C(e)}}}function rt(r){let e,n,t='<tr><th class="svelte-1yp2cxd">Vendor</th> <th class="svelte-1yp2cxd">Price</th></tr>',a,l,s=X(r[22].vendors),i=[];for(let f=0;f<s.length;f+=1)i[f]=Me(Ve(r,s,f));return{c(){e=y("table"),n=y("thead"),n.innerHTML=t,a=U(),l=y("tbody");for(let f=0;f<i.length;f+=1)i[f].c();this.h()},l(f){e=w(f,"TABLE",{class:!0});var v=P(e);n=w(v,"THEAD",{"data-svelte-h":!0}),G(n)!=="svelte-1yhq3d8"&&(n.innerHTML=t),a=z(v),l=w(v,"TBODY",{});var o=P(l);for(let T=0;T<i.length;T+=1)i[T].l(o);o.forEach(C),v.forEach(C),this.h()},h(){I(e,"class","svelte-1yp2cxd")},m(f,v){L(f,e,v),m(e,n),m(e,a),m(e,l);for(let o=0;o<i.length;o+=1)i[o]&&i[o].m(l,null)},p(f,v){if(v[0]&2){s=X(f[22].vendors);let o;for(o=0;o<s.length;o+=1){const T=Ve(f,s,o);i[o]?i[o].p(T,v):(i[o]=Me(T),i[o].c(),i[o].m(l,null))}for(;o<i.length;o+=1)i[o].d(1);i.length=s.length}},d(f){f&&C(e),ae(i,f)}}}function it(r){let e,n="No Vendors found.";return{c(){e=y("p"),e.textContent=n},l(t){e=w(t,"P",{"data-svelte-h":!0}),G(e)!=="svelte-1wtb9wu"&&(e.textContent=n)},m(t,a){L(t,e,a)},p:W,d(t){t&&C(e)}}}function Me(r){let e,n,t=r[25].name+"",a,l,s,i=r[25].price+"",f;return{c(){e=y("tr"),n=y("td"),a=Z(t),l=U(),s=y("td"),f=Z(i),this.h()},l(v){e=w(v,"TR",{});var o=P(e);n=w(o,"TD",{class:!0});var T=P(n);a=$(T,t),T.forEach(C),l=z(o),s=w(o,"TD",{class:!0});var h=P(s);f=$(h,i),h.forEach(C),o.forEach(C),this.h()},h(){I(n,"class","svelte-1yp2cxd"),I(s,"class","svelte-1yp2cxd")},m(v,o){L(v,e,o),m(e,n),m(n,a),m(e,l),m(e,s),m(s,f)},p(v,o){o[0]&2&&t!==(t=v[25].name+"")&&x(a,t),o[0]&2&&i!==(i=v[25].price+"")&&x(f,i)},d(v){v&&C(e)}}}function De(r,e){let n,t,a,l,s,i,f,v;function o(){e[15].call(t,e[23],e[24])}function T(...p){return e[16](e[24],...p)}let h=X(e[0]),c=[];for(let p=0;p<h.length;p+=1)c[p]=Pe(Ie(e,h,p));function S(p,b){if(p[22].loadingVendors)return at;if(p[22].selectedStrain)return st}let d=S(e),u=d&&d(e);return{key:r,first:null,c(){n=y("div"),t=y("input"),l=U(),s=y("datalist");for(let p=0;p<c.length;p+=1)c[p].c();i=U(),u&&u.c(),this.h()},l(p){n=w(p,"DIV",{});var b=P(n);t=w(b,"INPUT",{list:!0,id:!0,placeholder:!0,class:!0}),l=z(b),s=w(b,"DATALIST",{id:!0});var _=P(s);for(let O=0;O<c.length;O+=1)c[O].l(_);_.forEach(C),i=z(b),u&&u.l(b),b.forEach(C),this.h()},h(){I(t,"list","strains"),I(t,"id",a="strainInput"+e[22].id),I(t,"placeholder","Enter strain name"),I(t,"class","svelte-1yp2cxd"),I(s,"id","strains"),this.first=n},m(p,b){L(p,n,b),m(n,t),ne(t,e[22].inputValue),m(n,l),m(n,s);for(let _=0;_<c.length;_+=1)c[_]&&c[_].m(s,null);m(n,i),u&&u.m(n,null),f||(v=[Y(t,"input",o),Y(t,"input",T)],f=!0)},p(p,b){if(e=p,b[0]&2&&a!==(a="strainInput"+e[22].id)&&I(t,"id",a),b[0]&2&&t.value!==e[22].inputValue&&ne(t,e[22].inputValue),b[0]&1){h=X(e[0]);let _;for(_=0;_<h.length;_+=1){const O=Ie(e,h,_);c[_]?c[_].p(O,b):(c[_]=Pe(O),c[_].c(),c[_].m(s,null))}for(;_<c.length;_+=1)c[_].d(1);c.length=h.length}d===(d=S(e))&&u?u.p(e,b):(u&&u.d(1),u=d&&d(e),u&&(u.c(),u.m(n,null)))},d(p){p&&C(n),ae(c,p),u&&u.d(),f=!1,ue(v)}}}function Fe(r){let e,n="-",t,a;return{c(){e=y("button"),e.textContent=n,this.h()},l(l){e=w(l,"BUTTON",{class:!0,"data-svelte-h":!0}),G(e)!=="svelte-qmbxgh"&&(e.textContent=n),this.h()},h(){I(e,"class","svelte-1yp2cxd")},m(l,s){L(l,e,s),t||(a=Y(e,"click",r[9]),t=!0)},p:W,d(l){l&&C(e),t=!1,a()}}}function Ae(r){let e,n="Delete Preset",t,a;return{c(){e=y("button"),e.textContent=n,this.h()},l(l){e=w(l,"BUTTON",{class:!0,"data-svelte-h":!0}),G(e)!=="svelte-tbfrpy"&&(e.textContent=n),this.h()},h(){I(e,"class","svelte-1yp2cxd")},m(l,s){L(l,e,s),t||(a=Y(e,"click",r[7]),t=!0)},p:W,d(l){l&&C(e),t=!1,a()}}}function Je(r){let e,n;return e=new lt({props:{selectedStrains:r[4]}}),{c(){de(e.$$.fragment)},l(t){_e(e.$$.fragment,t)},m(t,a){pe(e,t,a),n=!0},p(t,a){const l={};a[0]&16&&(l.selectedStrains=t[4]),e.$set(l)},i(t){n||(K(e.$$.fragment,t),n=!0)},o(t){te(e.$$.fragment,t),n=!1},d(t){me(e,t)}}}function ot(r){let e,n,t,a="Load Preset:",l,s,i,f="Select a preset",v,o=[],T=new Map,h,c,S,d="+",u,p,b,_="Reset",O,k,H="Save Preset",M,J,g,V,D,j=X(r[2]),F=[];for(let E=0;E<j.length;E+=1)F[E]=Oe(Ne(r,j,E));let le=X(r[1]);const ge=E=>E[22].id;for(let E=0;E<le.length;E+=1){let A=Te(r,le,E),N=ge(A);T.set(N,o[E]=De(N,A))}let R=r[1].length>1&&Fe(r),q=r[3]&&Ae(r),B=r[4].length>1&&Je(r);return{c(){e=y("main"),n=y("div"),t=y("label"),t.textContent=a,l=U(),s=y("select"),i=y("option"),i.textContent=f;for(let E=0;E<F.length;E+=1)F[E].c();v=U();for(let E=0;E<o.length;E+=1)o[E].c();h=U(),c=y("div"),S=y("button"),S.textContent=d,u=U(),R&&R.c(),p=U(),b=y("button"),b.textContent=_,O=U(),k=y("button"),k.textContent=H,M=U(),q&&q.c(),J=U(),B&&B.c(),this.h()},l(E){e=w(E,"MAIN",{class:!0});var A=P(e);n=w(A,"DIV",{});var N=P(n);t=w(N,"LABEL",{for:!0,"data-svelte-h":!0}),G(t)!=="svelte-1wtj93e"&&(t.textContent=a),l=z(N),s=w(N,"SELECT",{id:!0});var se=P(s);i=w(se,"OPTION",{"data-svelte-h":!0}),G(i)!=="svelte-11izqta"&&(i.textContent=f);for(let ee=0;ee<F.length;ee+=1)F[ee].l(se);se.forEach(C),N.forEach(C),v=z(A);for(let ee=0;ee<o.length;ee+=1)o[ee].l(A);h=z(A),c=w(A,"DIV",{});var Q=P(c);S=w(Q,"BUTTON",{class:!0,"data-svelte-h":!0}),G(S)!=="svelte-1l15v5m"&&(S.textContent=d),u=z(Q),R&&R.l(Q),p=z(Q),b=w(Q,"BUTTON",{class:!0,"data-svelte-h":!0}),G(b)!=="svelte-1d245qh"&&(b.textContent=_),O=z(Q),k=w(Q,"BUTTON",{class:!0,"data-svelte-h":!0}),G(k)!=="svelte-r7063g"&&(k.textContent=H),M=z(Q),q&&q.l(Q),Q.forEach(C),J=z(A),B&&B.l(A),A.forEach(C),this.h()},h(){I(t,"for","presetSelect"),i.__value="",ne(i,i.__value),I(s,"id","presetSelect"),r[3]===void 0&&Be(()=>r[13].call(s)),I(S,"class","svelte-1yp2cxd"),I(b,"class","svelte-1yp2cxd"),I(k,"class","svelte-1yp2cxd"),I(e,"class","svelte-1yp2cxd")},m(E,A){L(E,e,A),m(e,n),m(n,t),m(n,l),m(n,s),m(s,i);for(let N=0;N<F.length;N+=1)F[N]&&F[N].m(s,null);ve(s,r[3],!0),m(e,v);for(let N=0;N<o.length;N+=1)o[N]&&o[N].m(e,null);m(e,h),m(e,c),m(c,S),m(c,u),R&&R.m(c,null),m(c,p),m(c,b),m(c,O),m(c,k),m(c,M),q&&q.m(c,null),m(e,J),B&&B.m(e,null),g=!0,V||(D=[Y(s,"change",r[13]),Y(s,"change",r[14]),Y(S,"click",r[8]),Y(b,"click",r[10]),Y(k,"click",r[17])],V=!0)},p(E,A){if(A[0]&4){j=X(E[2]);let N;for(N=0;N<j.length;N+=1){const se=Ne(E,j,N);F[N]?F[N].p(se,A):(F[N]=Oe(se),F[N].c(),F[N].m(s,null))}for(;N<F.length;N+=1)F[N].d(1);F.length=j.length}A[0]&12&&ve(s,E[3]),A[0]&2051&&(le=X(E[1]),o=qe(o,A,ge,1,E,le,T,e,Re,De,h,Te)),E[1].length>1?R?R.p(E,A):(R=Fe(E),R.c(),R.m(c,p)):R&&(R.d(1),R=null),E[3]?q?q.p(E,A):(q=Ae(E),q.c(),q.m(c,null)):q&&(q.d(1),q=null),E[4].length>1?B?(B.p(E,A),A[0]&16&&K(B,1)):(B=Je(E),B.c(),K(B,1),B.m(e,null)):B&&(Ue(),te(B,1,1,()=>{B=null}),ze())},i(E){g||(K(B),g=!0)},o(E){te(B),g=!1},d(E){E&&C(e),ae(F,E);for(let A=0;A<o.length;A+=1)o[A].d();R&&R.d(),q&&q.d(),B&&B.d(),V=!1,ue(D)}}}function ct(r,e,n){let t,{cannabisStrains:a=[]}=e,{strainCount:l=0}=e,s=[{id:1,inputValue:"",selectedStrain:null,vendors:[],loadingVendors:!1,noVendors:!1}],i=2,f=JSON.parse(localStorage.getItem("presets")||"[]"),v="";function o(){localStorage.setItem("searchFields",JSON.stringify(s)),localStorage.setItem("nextId",JSON.stringify(i))}function T(){const g=localStorage.getItem("searchFields"),V=localStorage.getItem("nextId");g&&n(1,s=JSON.parse(g)),V&&(i=JSON.parse(V))}function h(g){if(!g){alert("Preset name cannot be empty.");return}const V=f.findIndex(j=>j.name===g),D={name:g,fields:s};V>=0?n(2,f[V]=D,f):n(2,f=[...f,D]),localStorage.setItem("presets",JSON.stringify(f))}function c(g){const V=f.find(D=>D.name===g);V&&(n(1,s=V.fields),i=Math.max(...s.map(D=>D.id))+1,n(3,v=g),o(),s.forEach((D,j)=>{D.selectedStrain&&_(j)}))}function S(){v&&(n(2,f=f.filter(g=>g.name!==v)),localStorage.setItem("presets",JSON.stringify(f)),n(3,v=""))}he(()=>{T()});function d(){n(1,s=[...s,{id:i++,inputValue:"",selectedStrain:null,vendors:[],loadingVendors:!1,noVendors:!1}]),o()}function u(){s.length>1&&(n(1,s=s.slice(0,-1)),o())}function p(){n(1,s=[{id:1,inputValue:"",selectedStrain:null,vendors:[],loadingVendors:!1,noVendors:!1}]),i=2,o()}async function b(g,V){const D={...s[g]};D.inputValue=V;const j=a.find(F=>F.name.toLowerCase()===V.toLowerCase());j&&(!D.selectedStrain||D.selectedStrain.id!==j.id)?(D.selectedStrain=j,D.loadingVendors=!0,n(1,s=[...s.slice(0,g),D,...s.slice(g+1)]),o(),await _(g)):j||(D.selectedStrain=null,D.vendors=[],D.loadingVendors=!1,D.noVendors=!1,n(1,s=[...s.slice(0,g),D,...s.slice(g+1)]),o())}async function _(g){const V={...s[g]};if(V.selectedStrain){const D=await Ye(V.selectedStrain.id);if(D&&!D.error){const j=D.message.data.priceFlowers.data.filter(F=>F.attributes.availibility===1||F.attributes.availibility===2);j.length>0?(V.vendors=j.map(F=>({name:F.attributes.vendor.data.attributes.name,price:F.attributes.price})).sort((F,le)=>F.price-le.price),V.noVendors=!1):(V.vendors=[],V.noVendors=!0)}else V.vendors=[],V.noVendors=!0;V.loadingVendors=!1,n(1,s=[...s.slice(0,g),V,...s.slice(g+1)]),o()}}function O(){v=je(this),n(3,v),n(2,f)}const k=g=>c(g.target.value);function H(g,V){g[V].inputValue=this.value,n(1,s)}const M=(g,V)=>b(g,V.target.value),J=()=>h(prompt("Enter preset name:"));return r.$$set=g=>{"cannabisStrains"in g&&n(0,a=g.cannabisStrains),"strainCount"in g&&n(12,l=g.strainCount)},r.$$.update=()=>{r.$$.dirty[0]&4096&&l===0&&p(),r.$$.dirty[0]&2&&n(4,t=s.filter(g=>g.selectedStrain&&g.vendors.length>0).map(g=>({id:g.selectedStrain.id,name:g.selectedStrain.name,vendors:g.vendors})))},[a,s,f,v,t,h,c,S,d,u,p,b,l,O,k,H,M,J]}class ft extends oe{constructor(e){super(),ce(this,e,ct,ot,ie,{cannabisStrains:0,strainCount:12},null,[-1,-1])}}function Le(r){let e,n;return e=new ft({props:{cannabisStrains:r[0],strainCount:r[1]}}),{c(){de(e.$$.fragment)},l(t){_e(e.$$.fragment,t)},m(t,a){pe(e,t,a),n=!0},p(t,a){const l={};a&1&&(l.cannabisStrains=t[0]),a&2&&(l.strainCount=t[1]),e.$set(l)},i(t){n||(K(e.$$.fragment,t),n=!0)},o(t){te(e.$$.fragment,t),n=!1},d(t){me(e,t)}}}function ut(r){let e,n,t,a="Flowzz Shopping Helper",l,s,i,f,v,o,T,h,c,S;o=new $e({}),o.$on("strainsUpdated",r[3]),o.$on("resetView",r[4]);let d=r[1]>0&&Le(r);return{c(){e=y("main"),n=y("div"),t=y("h1"),t.textContent=a,l=U(),s=y("img"),v=U(),de(o.$$.fragment),T=U(),d&&d.c(),this.h()},l(u){e=w(u,"MAIN",{class:!0});var p=P(e);n=w(p,"DIV",{class:!0});var b=P(n);t=w(b,"H1",{"data-svelte-h":!0}),G(t)!=="svelte-mh45l8"&&(t.textContent=a),l=z(b),s=w(b,"IMG",{src:!0,alt:!0,class:!0}),b.forEach(C),v=z(p),_e(o.$$.fragment,p),T=z(p),d&&d.l(p),p.forEach(C),this.h()},h(){fe(s.src,i=r[2]?"/mute.png":"/unmute.png")||I(s,"src",i),I(s,"alt",f=r[2]?"Unmute":"Mute"),I(s,"class","mute-icon svelte-528oc8"),I(n,"class","header svelte-528oc8"),I(e,"class","svelte-528oc8")},m(u,p){L(u,e,p),m(e,n),m(n,t),m(n,l),m(n,s),m(e,v),pe(o,e,null),m(e,T),d&&d.m(e,null),h=!0,c||(S=Y(s,"click",r[5]),c=!0)},p(u,[p]){(!h||p&4&&!fe(s.src,i=u[2]?"/mute.png":"/unmute.png"))&&I(s,"src",i),(!h||p&4&&f!==(f=u[2]?"Unmute":"Mute"))&&I(s,"alt",f),u[1]>0?d?(d.p(u,p),p&2&&K(d,1)):(d=Le(u),d.c(),K(d,1),d.m(e,null)):d&&(Ue(),te(d,1,1,()=>{d=null}),ze())},i(u){h||(K(o.$$.fragment,u),K(d),h=!0)},o(u){te(o.$$.fragment,u),te(d),h=!1},d(u){u&&C(e),me(o),d&&d.d(),c=!1,S()}}}function ht(r,e,n){let t=[],a=0,l=!1,s;function i(o){n(0,t=o.detail.cannabisStrains),n(1,a=o.detail.strainCount)}function f(){n(0,t=[]),n(1,a=0)}function v(){n(2,l=!l),localStorage.setItem("isMuted",JSON.stringify(l)),l&&s?s.pause():s&&s.play()}return he(()=>{const o=localStorage.getItem("isMuted");if(o&&n(2,l=JSON.parse(o)),!l){const T=["/sounds/sound1.mp3","/sounds/sound2.mp3","/sounds/sound3.mp3","/sounds/sound4.mp3"],h=T[Math.floor(Math.random()*T.length)];s=new Audio(h),s.loop=!0,s.play()}}),[t,a,l,i,f,v]}class pt extends oe{constructor(e){super(),ce(this,e,ht,ut,ie,{})}}export{pt as component};
